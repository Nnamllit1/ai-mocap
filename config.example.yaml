server:
  host: 0.0.0.0
  port: 8000
  token: "change-this-token"

model:
  path: yolo26n-pose.pt
  conf: 0.25
  iou: 0.45
  device: cpu

runtime:
  target_fps: 24
  max_latency_ms: 120
  ema_alpha: 0.6
  show_preview: true
  missing_joint_hold_ms: 250
  max_joint_jump_m: 0.35
  jump_reject_conf: 0.85
  bone_length_guard_enabled: true
  bone_length_soft_rel_tol: 0.15
  bone_length_hard_rel_tol: 0.35
  bone_length_ema_alpha: 0.2
  bone_length_learn_conf: 0.65

triangulation:
  min_views: 2
  pair_conf_threshold: 0.25
  reproj_error_max: 25.0
  allow_single_view_fallback: true
  single_view_conf_scale: 0.55
  single_view_max_age_ms: 800

osc:
  host: 127.0.0.1
  port: 9000
  address_prefix: /mocap

ingest:
  jpeg_quality: 70
  max_frame_size: 1500000
  client_fps_cap: 20
  heartbeat_timeout_s: 6.0

export:
  enable_live_export: true
  enable_offline_export: true
  live_json_path: data/exports/live_mocap.json
  live_csv_path: data/exports/live_mocap.csv
  offline_json_path: data/exports/offline_mocap.json
  offline_csv_path: data/exports/offline_mocap.csv

calibration:
  output_path: data/calibration/cameras.json
  chessboard: [9, 6]
  square_size_m: 0.025
  min_captures: 20
  auto_enabled_default: false
  auto_poll_ms: 400
  auto_min_interval_ms: 1200
  auto_hold_ms: 450
  auto_motion_threshold_norm: 0.035
  auto_stable_threshold_norm: 0.010
  auto_min_board_area_norm: 0.008
  auto_pose_delta_threshold: 0.12
  resume_policy: manual
  resume_timeout_s: 90

calibration_sync:
  adaptive_enabled: true
  min_latency_ms: 120
  max_latency_ms: 450
  jitter_factor: 2.0
  history_size: 60
  fps_downshift_failure_streak: 3

persistence:
  state_dir: data/state
  invites_path: data/state/join_invites.json
  camera_registry_path: data/state/camera_registry.json
  calibration_session_path: data/state/calibration_session.json

offline_sources:
  - id: phone1
    path: data/phone1.mp4
    enabled: true
  - id: phone2
    path: data/phone2.mp4
    enabled: true
  - id: phone3
    path: data/phone3.mp4
    enabled: false
